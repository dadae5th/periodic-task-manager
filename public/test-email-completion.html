<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì´ë©”ì¼ ì™„ë£Œ ë²„íŠ¼ í…ŒìŠ¤íŠ¸</title>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            padding: 20px; 
            max-width: 800px; 
            margin: 0 auto; 
            line-height: 1.6;
        }
        .test-section { 
            background: #f8f9fa; 
            padding: 20px; 
            margin: 20px 0; 
            border-radius: 8px; 
            border: 1px solid #dee2e6; 
        }
        .btn { 
            display: inline-block; 
            padding: 12px 24px; 
            margin: 10px 5px; 
            background: #28a745; 
            color: white; 
            text-decoration: none; 
            border-radius: 5px; 
            border: none; 
            cursor: pointer; 
            font-size: 16px; 
        }
        .btn-batch { background: #17a2b8; }
        .btn-debug { background: #dc3545; }
        .btn-tool { background: #6c757d; padding: 8px 16px; font-size: 14px; }
        .log { 
            background: #000; 
            color: #0f0; 
            padding: 15px; 
            border-radius: 5px; 
            font-family: monospace; 
            margin: 10px 0; 
            word-break: break-all;
        }
        .info { 
            background: #d1ecf1; 
            border: 1px solid #bee5eb; 
            padding: 15px; 
            border-radius: 5px; 
            margin: 20px 0; 
        }
        .warning {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            padding: 15px;
            border-radius: 5px;
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <h1>ğŸ“§ ì´ë©”ì¼ ì™„ë£Œ ë²„íŠ¼ ìë™ ë¡œê·¸ì¸ í…ŒìŠ¤íŠ¸</h1>
    
    <div class="info">
        <strong>í…ŒìŠ¤íŠ¸ ëª©ì :</strong> ë©”ì¼ì—ì„œ ì™„ë£Œ ë²„íŠ¼ í´ë¦­ì‹œ ìë™ ë¡œê·¸ì¸ì´ ì‘ë™í•˜ëŠ”ì§€ í™•ì¸<br>
        <strong>í˜„ì¬ ì‹œê°„:</strong> <span id="currentTime"></span><br>
        <strong>í…ŒìŠ¤íŠ¸ ì´ë©”ì¼:</strong> test@example.com
    </div>

    <div class="warning">
        <strong>âš ï¸ ì¤‘ìš”:</strong> ì•„ë˜ ë²„íŠ¼ë“¤ì„ í´ë¦­í•˜ë©´ ì‹¤ì œë¡œ ë©”ì¼ ì™„ë£Œ ì²˜ë¦¬ê°€ ì‹¤í–‰ë©ë‹ˆë‹¤.<br>
        ìë™ ë¡œê·¸ì¸ì´ ì„±ê³µí•˜ë©´ ëŒ€ì‹œë³´ë“œë¡œ ì´ë™í•˜ê³ , ì‹¤íŒ¨í•˜ë©´ ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ì´ë™í•©ë‹ˆë‹¤.
    </div>
    
    <div class="test-section">
        <h3>ğŸ”— 1. GET ë°©ì‹ ì¼ê´„ì™„ë£Œ í…ŒìŠ¤íŠ¸ (ê°€ì¥ ì¼ë°˜ì )</h3>
        <p>ì´ë©”ì¼ì—ì„œ ì™„ë£Œ ë²„íŠ¼ì„ ì§ì ‘ í´ë¦­í•˜ëŠ” ë°©ì‹ê³¼ ë™ì¼í•©ë‹ˆë‹¤.</p>
        <a href="https://periodic-task-manager.vercel.app/api/tasks/batch-complete?tasks=test-task-1,test-task-2&completed_by=test@example.com" class="btn">
            GET ë°©ì‹ìœ¼ë¡œ ì™„ë£Œ ì²˜ë¦¬
        </a>
        <div class="log">
https://periodic-task-manager.vercel.app/api/tasks/batch-complete?tasks=test-task-1,test-task-2&completed_by=test@example.com
        </div>
    </div>
    
    <div class="test-section">
        <h3>ğŸ“ 2. POST ë°©ì‹ ì¼ê´„ì™„ë£Œ í…ŒìŠ¤íŠ¸</h3>
        <p>ì´ë©”ì¼ í¼ì—ì„œ ì™„ë£Œ ë²„íŠ¼ì„ í´ë¦­í•˜ëŠ” ë°©ì‹ê³¼ ë™ì¼í•©ë‹ˆë‹¤.</p>
        <form method="post" action="https://periodic-task-manager.vercel.app/api/tasks/batch-complete" style="margin: 10px 0;">
            <input type="hidden" name="completed_by" value="test@example.com" />
            <input type="hidden" name="task_ids" value="test-task-1" />
            <input type="hidden" name="task_ids" value="test-task-2" />
            <button type="submit" class="btn btn-batch">POST ë°©ì‹ìœ¼ë¡œ ì™„ë£Œ ì²˜ë¦¬</button>
        </form>
    </div>

    <div class="test-section">
        <h3>ğŸ” 3. ì‹¤ì œ ë©”ì¼ ë°œì†¡ ë° í…ŒìŠ¤íŠ¸</h3>
        <p>ì‹¤ì œë¡œ ì´ë©”ì¼ì„ ë°œì†¡í•˜ê³  ë©”ì¼ì—ì„œ ì™„ë£Œ ë²„íŠ¼ì„ í…ŒìŠ¤íŠ¸í•´ë³´ì„¸ìš”.</p>
        <a href="https://periodic-task-manager.vercel.app/api/email/send-daily" class="btn" target="_blank">
            ğŸ“§ ì‹¤ì œ ë©”ì¼ ë°œì†¡
        </a>
        <p><small>* ë©”ì¼ì„ ë°›ì€ í›„ ë©”ì¼ì—ì„œ ì™„ë£Œ ë²„íŠ¼ì„ í´ë¦­í•´ë³´ì„¸ìš”.</small></p>
    </div>
    
    <div class="test-section">
        <h3>ğŸ› ï¸ 4. ë””ë²„ê¹… ë„êµ¬</h3>
        <a href="https://periodic-task-manager.vercel.app/api/test/cleanup-tokens" class="btn btn-tool" target="_blank">í† í° ì •ë¦¬</a>
        <a href="https://periodic-task-manager.vercel.app/api/test/email-tokens-table" class="btn btn-tool" target="_blank">í† í° ìƒíƒœ í™•ì¸</a>
        <a href="https://periodic-task-manager.vercel.app/dashboard" class="btn btn-tool" target="_blank">ëŒ€ì‹œë³´ë“œ ì§ì ‘ ì ‘ì†</a>
        <a href="https://vercel.com/dadae5th/periodic-task-manager/functions" class="btn btn-tool" target="_blank">Vercel ë¡œê·¸</a>
    </div>
    
    <div class="test-section">
        <h3>ğŸ¯ ì˜ˆìƒ ë™ì‘ ìˆœì„œ</h3>
        <ol>
            <li><strong>ì™„ë£Œ ë²„íŠ¼ í´ë¦­</strong> â†’ batch-complete API í˜¸ì¶œ</li>
            <li><strong>ì—…ë¬´ ì™„ë£Œ ì²˜ë¦¬</strong> â†’ Mock ë°ì´í„°ë¡œ ì²˜ë¦¬</li>
            <li><strong>ì´ë©”ì¼ í† í° ìƒì„±</strong> â†’ email-token API í˜¸ì¶œ</li>
            <li><strong>ìë™ ë¡œê·¸ì¸</strong> â†’ email-login APIë¡œ ë¦¬ë””ë ‰ì…˜</li>
            <li><strong>ëŒ€ì‹œë³´ë“œ í‘œì‹œ</strong> â†’ ì¿ í‚¤ ì„¤ì • í›„ ëŒ€ì‹œë³´ë“œ ë¡œë”©</li>
        </ol>
        
        <h4>ğŸš¨ ë¬¸ì œ ë°œìƒì‹œ ì²´í¬í¬ì¸íŠ¸:</h4>
        <ul>
            <li>ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ì´ë™í•˜ëŠ” ê²½ìš° â†’ í† í° ìƒì„± ë˜ëŠ” ê²€ì¦ ì‹¤íŒ¨</li>
            <li>404 ì—ëŸ¬ â†’ API ê²½ë¡œ ë¬¸ì œ</li>
            <li>500 ì—ëŸ¬ â†’ ì„œë²„ ë‚´ë¶€ ì˜¤ë¥˜ (Vercel ë¡œê·¸ í™•ì¸)</li>
        </ul>
    </div>

    <div class="test-section">
        <h3>ğŸ“Š í˜„ì¬ ì‹œìŠ¤í…œ ìƒíƒœ</h3>
        <p>ì‹œìŠ¤í…œì´ ì •ìƒì ìœ¼ë¡œ ì‘ë™í•˜ë ¤ë©´ ë‹¤ìŒì´ ëª¨ë‘ ì„±ê³µí•´ì•¼ í•©ë‹ˆë‹¤:</p>
        <div id="systemStatus">
            <p>ğŸ”„ ì‹œìŠ¤í…œ ìƒíƒœ í™•ì¸ ì¤‘...</p>
        </div>
    </div>

    <script>
        // í˜„ì¬ ì‹œê°„ í‘œì‹œ
        document.getElementById('currentTime').textContent = new Date().toLocaleString('ko-KR');
        
        // ì‹œìŠ¤í…œ ìƒíƒœ í™•ì¸
        async function checkSystemStatus() {
            const statusDiv = document.getElementById('systemStatus');
            const checks = [
                { name: 'batch-complete API', url: '/api/tasks/index' },
                { name: 'email-token API', url: '/api/auth/email-token' },
                { name: 'email-login API', url: '/api/auth/email-login' }
            ];
            
            let statusHtml = '';
            
            for (const check of checks) {
                try {
                    const response = await fetch(check.url, { method: 'HEAD' });
                    const status = response.status < 500 ? 'âœ…' : 'âŒ';
                    statusHtml += `<p>${status} ${check.name}: ${response.status}</p>`;
                } catch (error) {
                    statusHtml += `<p>âŒ ${check.name}: ì—°ê²° ì‹¤íŒ¨</p>`;
                }
            }
            
            statusDiv.innerHTML = statusHtml;
        }
        
        // í˜ì´ì§€ ë¡œë“œì‹œ ìƒíƒœ í™•ì¸
        checkSystemStatus();
    </script>
</body>
</html>
